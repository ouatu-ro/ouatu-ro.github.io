---
interface Props extends Record<string, any> {
  label: string;
}

const { label } = Astro.props;
---

<div class="ouroboros">
  <div class="ouroboros-track">
    <div class="ouroboros-ring">
      <span class="ouroboros-segment ouroboros-segment--one" />
      <span class="ouroboros-segment ouroboros-segment--two" />
      <span class="ouroboros-segment ouroboros-segment--three" />
    </div>
    <div class="ouroboros-tail" />
    <div class="ouroboros-head">
      <span class="ouroboros-eye" />
    </div>
  </div>
  <span class="ouroboros-label">{label}</span>
</div>

<style>
  :global(.project-card-media--ouroboros) {
    background: radial-gradient(circle at 40% 30%, rgba(0, 255, 204, 0.16), rgba(12, 16, 28, 0.94));
    position: relative;
  }

  .ouroboros {
    position: relative;
    width: 72%;
    aspect-ratio: 1 / 1;
    display: grid;
    place-items: center;
    color: rgba(255, 255, 255, 0.92);
    text-transform: uppercase;
    letter-spacing: 0.18em;
  }

  .ouroboros-track {
    position: relative;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    display: grid;
    place-items: center;
    animation: ouroborosOrbit 16s linear infinite;
    filter: drop-shadow(0 0 22px rgba(0, 255, 204, 0.26));
  }

  .ouroboros-ring {
    position: absolute;
    inset: 6%;
    border-radius: 50%;
    padding: 16px;
    box-sizing: border-box;
    background:
      conic-gradient(
        from 130deg,
        rgba(0, 255, 204, 0.1) 0deg,
        rgba(0, 255, 204, 0.8) 60deg,
        rgba(108, 93, 255, 0.85) 190deg,
        rgba(255, 118, 158, 0.85) 310deg,
        rgba(0, 255, 204, 0.1) 360deg
      );
    box-shadow:
      inset 0 0 24px rgba(0, 0, 0, 0.52),
      0 0 30px rgba(0, 255, 204, 0.32);
  }

  .ouroboros-ring::before {
    content: "";
    position: absolute;
    inset: 10px;
    border-radius: 50%;
    border: 1.2px dashed rgba(255, 255, 255, 0.18);
    opacity: 0.6;
  }

  .ouroboros-ring::after {
    content: "";
    position: absolute;
    inset: 16px;
    border-radius: 50%;
    background: radial-gradient(circle at 45% 55%, rgba(24, 30, 48, 0.92), rgba(10, 12, 20, 0.68));
    box-shadow: inset 0 0 22px rgba(0, 0, 0, 0.65);
  }

  .ouroboros-segment {
    position: absolute;
    width: 30%;
    height: 12%;
    border-radius: 40px;
    background: linear-gradient(90deg, rgba(255, 255, 255, 0), rgba(0, 255, 204, 0.65), rgba(255, 255, 255, 0));
    opacity: 0.9;
    filter: drop-shadow(0 0 10px rgba(0, 255, 204, 0.45));
  }

  .ouroboros-segment--one {
    top: 18%;
    left: 56%;
    transform: rotate(32deg);
  }

  .ouroboros-segment--two {
    top: 46%;
    left: 6%;
    transform: rotate(-48deg);
  }

  .ouroboros-segment--three {
    bottom: 16%;
    right: 12%;
    transform: rotate(68deg);
  }

  .ouroboros-tail {
    position: absolute;
    bottom: 14%;
    left: 14%;
    width: 22%;
    height: 22%;
    border-radius: 60% 40% 30% 70%;
    background: linear-gradient(130deg, rgba(108, 93, 255, 0.75), rgba(0, 255, 204, 0.6));
    transform: rotate(-42deg);
    box-shadow: 0 0 18px rgba(0, 255, 204, 0.35);
    opacity: 0.86;
  }

  .ouroboros-head {
    position: absolute;
    top: -4%;
    right: 12%;
    width: 26%;
    aspect-ratio: 1 / 1;
    border-radius: 45% 55% 52% 48%;
    background: radial-gradient(circle at 32% 30%, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.45) 45%, rgba(0, 0, 0, 0.72) 100%);
    box-shadow: 0 0 26px rgba(0, 255, 204, 0.45);
    display: grid;
    place-items: center;
    animation: ouroborosBlink 4.5s ease-in-out infinite;
  }

  .ouroboros-eye {
    position: relative;
    width: 42%;
    height: 42%;
    border-radius: 50%;
    background: radial-gradient(circle at 40% 40%, rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.2));
  }

  .ouroboros-eye::after {
    content: "";
    position: absolute;
    top: 20%;
    left: 28%;
    width: 45%;
    height: 45%;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.65);
    filter: blur(1px);
  }

  .ouroboros-label {
    margin-top: 0.5rem;
    font-size: clamp(1.1rem, 3.4vw, 1.8rem);
    font-weight: 600;
    letter-spacing: 0.22em;
  }

  @keyframes ouroborosOrbit {
    0%,
    100% {
      transform: rotate(0deg);
    }
    50% {
      transform: rotate(6deg);
    }
  }

  @keyframes ouroborosBlink {
    0%,
    100% {
      transform: scale(1) rotate(12deg);
    }
    45% {
      transform: scale(0.94) rotate(16deg);
    }
    55% {
      transform: scale(0.96) rotate(10deg);
    }
  }
</style>
